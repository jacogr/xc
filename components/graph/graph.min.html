<link rel="import" href="../3rdparty/lodash.min.html"/><link rel="import" href="../3rdparty/polymer.min.html"/><link rel="import" href="../3rdparty/d3.min.html"/><link rel="import" href="../3rdparty/nvd3.min.html"/><dom-module id="xc-graph-styles"><template><style include="xc-nvd3-styles"></style><style>:host{display:block}
:host(.max){width:100%;height:100%}
svg#svg{display:block;height:100%;width:100%}</style></template></dom-module><dom-module id="xc-graph"><template><style include="xc-graph-styles"></style><svg id="svg"></svg></template><script>"use strict";!function(){window.xc=window.xc||{};var t=function(t){return _.map(t.data,function(r,e){return{key:r.key||t.keys[e],area:_.get(r,"fill",t.fill||!1),fillOpacity:.25,values:_.map(r.values,function(t,r){return{x:r,y:t}})}})},r=function(t){return _.map(t.data,function(r,e){return{key:r.key||t.keys[e],y:_.get(r,"value",r)}})},e=function(t,r){var e=t.xaxis?function(r,e){return t.xaxis[e]}:d3.format(",r"),n=d3.format(",r");r.yAxis.tickFormat(n),r.xAxis.tickFormat(e)},n=function(r){var n=nv.models.lineChart().options({transitionDuration:300,useInteractiveGuideline:!0});return e(r,n),{chart:n,data:t(r)}},a=function(t){var e=nv.models.pieChart().x(function(t){return t.key}).y(function(t){return t.y}).labelType("value");return{chart:e,data:r(t)}},i=function(t){var r=a(t);return r.chart.donut(!0),r},u=function(r){var n=nv.models.multiBarChart().stacked(_.get(r,"stacked",!1));return e(r,n),{chart:n,data:t(r)}},o=function(t,r,e){return nv.addGraph(function(){var o=void 0;switch(r){case"bar":o=u(e);break;case"donut":o=i(e);break;case"line":o=n(e);break;case"pie":o=a(e)}return d3.select(t).datum(o.data).transition().duration(1e3).call(o.chart),nv.utils.windowResize(o.chart.update),o.chart}),!0};window.xc.Graph={properties:{data:{type:Object,observer:"_renderChart"},type:{type:String,observer:"_renderChart"}},_renderChart:function(){console.log(this.type,this.data),this._render(this.$.svg,this.type,this.data)},_render:function(t,r,e){return r&&e?o(t,r,e):!1}},Polymer({is:"xc-graph",behaviors:[window.xc.Graph]})}();</script></dom-module><dom-module id="xc-graph-bar"><template><style include="xc-graph-styles"></style><svg id="svg"></svg></template><script>"use strict";!function(){window.xc=window.xc||{},window.xc.GraphBar={properties:{type:{type:String,value:"bar"}}},Polymer({is:"xc-graph-bar",behaviors:[window.xc.Graph,window.xc.GraphBar]})}();</script></dom-module><dom-module id="xc-graph-donut"><template><style include="xc-graph-styles"></style><svg id="svg"></svg></template><script>"use strict";!function(){window.xc=window.xc||{},window.xc.GraphDonut={properties:{type:{type:String,value:"donut"}}},Polymer({is:"xc-graph-donut",behaviors:[window.xc.Graph,window.xc.GraphDonut]})}();</script></dom-module><dom-module id="xc-graph-line"><template><style include="xc-graph-styles"></style><svg id="svg"></svg></template><script>"use strict";!function(){window.xc=window.xc||{},window.xc.GraphLine={properties:{type:{type:String,value:"line"}}},Polymer({is:"xc-graph-line",behaviors:[window.xc.Graph,window.xc.GraphLine]})}();</script></dom-module><dom-module id="xc-graph-pie"><template><style include="xc-graph-styles"></style><svg id="svg"></svg></template><script>"use strict";!function(){window.xc=window.xc||{},window.xc.GraphPie={properties:{type:{type:String,value:"pie"}}},Polymer({is:"xc-graph-pie",behaviors:[window.xc.Graph,window.xc.GraphPie]})}();</script></dom-module>
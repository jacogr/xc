<link rel="import" href="../3rdparty/lodash.min.html"/><link rel="import" href="../3rdparty/polymer.min.html"/><link rel="import" href="../number-text/number-text.min.html"/><dom-module id="xc-datetime"><template>{{datestr}}</template><script>"use strict";!function(){window.xc=window.xc||{};var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t=["January","February","March","April","May","June","July","August","September","October","November","December"],r=function(e){return("0"+(e||0)).slice(-2)},a=function m(a,n){var u=a.getDay(),c=a.getDate(),i=a.getMonth(),s=a.getFullYear(),o=a.getHours(),d=a.getMinutes(),g=a.getSeconds();return n.replace(/%([%aAbBcdDhHIlmMpPsStwyYZz])/g,function(n,l){var h=void 0;switch(l){case"%":return"%";case"a":return e[u].slice(0,3);case"A":return e[u];case"b":return t[i].slice(0,3);case"B":return t[i];case"c":return Math.floor(s/100);case"d":return c;case"D":return r(c);case"h":return o;case"H":return r(o);case"I":return r(m(a,"%l"));case"l":return 0===o||12===o?12:(o+12)%12;case"m":return r(i+1);case"M":return r(d);case"p":return o>11?"pm":"am";case"P":return o>11?"PM":"AM";case"s":return g;case"S":return r(g);case"t":return a.toString();case"w":return u;case"y":return r(s%100);case"Y":return s;case"Z":return h=a.toString().match(/\((\w+)\)$/),h?h[1]:"";case"z":return h=a.toString().match(/\w([+-]\d\d\d\d) /),h?h[1]:"";default:return""}})},n=function(e){var t=Math.round(e/1e3),r=Math.round(t/60),a=Math.round(r/60),n=Math.round(a/24),u=Math.round(n/30),c=Math.round(u/12);return 0>e||10>t?"just now":45>t?t+" seconds":90>t?"a minute ago":45>r?r+" minutes":90>r?"an hour":24>a?a+" hours":36>a?"a day":30>n?n+" days":45>n?"a month":12>u?u+" months":18>u?"a year":c+" years"},u=function(e){var t=function(t){return window.xc.NumberText.format(a(e,t))};return t("%d")+" "+a(e,"%B")+" "+t("%c")+" "+t("%y")},c=function(e){var t=function(t){return window.xc.NumberText.format(a(e,t))},r=a(e,"%M");return r="00"===r?"o'clock":""+(0===r.indexOf("0")?"o'":"")+window.xc.NumberText.format(r),t("%l")+" "+r+" "+a(e,"%p")},i="%d %b %Y",s="%H:%M",o="%D %B %Y",d="%H:%M:%S";window.xc.Datetime={properties:{datetime:{type:String,observer:"_datetimeChanged"},format:{type:String,value:"-medium",observer:"_setDateStr"},date:{type:Date},datestr:{type:String}},_datetimeChanged:function(){var e=Date.parse(this.datetime);this.date=_.isNaN(e)?null:new Date(e),this._setDateStr()},_setDateStr:function(){this.datestr=this._format(this.date,this.format)},_format:function(e,t){if(!e||!_.isDate(e))return"";var r=t;return r=r.replace(/-elapsed/g,function(){return n((new Date).getTime()-e.getTime())}),r=r.replace(/-remaining/g,function(){return n(e.getTime()-(new Date).getTime())}),r=r.replace(/-textDate/g,function(){return u(e)}),r=r.replace(/-textTime/g,function(){return c(e)}),r=r.replace(/-text/g,u(e)+" "+c(e)),r=r.replace(/-longDate/g,o),r=r.replace(/-longTime/g,d),r=r.replace(/-long/g,o+" "+d),r=r.replace(/-mediumDate/g,i),r=r.replace(/-mediumTime/g,s),r=r.replace(/-medium/g,i+" "+s),a(e,r)}},Polymer({is:"xc-datetime",behaviors:[window.xc.Datetime]})}();</script></dom-module><dom-module id="xc-time-elapsed"><template>{{datestr}}</template><script>"use strict";!function(){window.xc=window.xc||{},window.xc.DatetimeElapsed={properties:{format:{type:String,value:"-elapsed"}}},Polymer({is:"xc-time-elapsed",behaviors:[window.xc.Datetime,window.xc.DatetimeElapsed]})}();</script></dom-module><dom-module id="xc-time-remaining"><template>{{datestr}}</template><script>"use strict";!function(){window.xc=window.xc||{},window.xc.DatetimeRemaining={properties:{format:{type:String,value:"-remaining"}}},Polymer({is:"xc-time-remaining",behaviors:[window.xc.Datetime,window.xc.DatetimeRemaining]})}();</script></dom-module><dom-module id="xc-date"><template><xc-datetime format="{{ dtformat }}" datetime="{{ datetime }}"></xc-datetime></template><script>"use strict";!function(){window.xc=window.xc||{},window.xc.DatetimeDate={properties:{datetime:{type:Object},format:{type:String,value:"-medium",observer:"_formatChanged"},dtformat:{type:String,value:"-mediumDate"}},_formatChanged:function(){var t=void 0;t=_.includes(this.format,"-long")?"-long":_.includes(this.format,"-text")?"-text":"-medium",this.dtformat=t+"Date"}},Polymer({is:"xc-date",behaviors:[window.xc.DatetimeDate]})}();</script></dom-module><dom-module id="xc-time"><template><xc-datetime format="{{ dtformat }}" datetime="{{ datetime }}"></xc-datetime></template><script>"use strict";!function(){window.xc=window.xc||{},window.xc.DatetimeTime={properties:{datetime:{type:Object},format:{type:String,value:"-medium",observer:"_formatChanged"},dtformat:{type:String,value:"-mediumTime"}},_formatChanged:function(){var t=void 0;t=_.includes(this.format,"-long")?"-long":_.includes(this.format,"-text")?"-text":"-medium",this.dtformat=t+"Time"}},Polymer({is:"xc-time",behaviors:[window.xc.DatetimeTime]})}();</script></dom-module>